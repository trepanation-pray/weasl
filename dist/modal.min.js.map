{"version":3,"sources":["modal.js"],"names":["weaslOpen","content","name","weaslOpened","Event","modal","wrap","document","createElement","overlay","container","close","classList","add","setAttribute","innerHTML","body","firstChild","appendChild","setTimeout","focus","dispatchEvent","weaslClose","event","expiration","weaslClosed","remove","querySelector","weasl","options","weaslInit","addEventListener","target","matches","preventDefault"],"mappings":"AAAA,SAAAA,UAAAC,EAAAC,GAEA,IAAAC,EAAA,IAAAC,MAAA,eAGAC,EAAA,CACAC,KAAAC,SAAAC,cAAA,OACAC,QAAAF,SAAAC,cAAA,OACAE,UAAAH,SAAAC,cAAA,OACAP,QAAAM,SAAAC,cAAA,OACAG,MAAAJ,SAAAC,cAAA,WAuBA,IAnBAH,EAAAC,KAAAM,UAAAC,IAAA,oBAEAR,EAAAI,QAAAG,UAAAC,IAAA,SACAR,EAAAI,QAAAG,UAAAC,IAAA,SAAAX,GAEAG,EAAAK,UAAAE,UAAAC,IAAA,oBACAR,EAAAK,UAAAI,aAAA,OAAA,UAEAT,EAAAJ,QAAAW,UAAAC,IAAA,kBACAR,EAAAJ,QAAAW,UAAAC,IAAA,kBAEAR,EAAAJ,QAAAc,UAAAd,EAEAI,EAAAM,MAAAC,UAAAC,IAAA,gBACAR,EAAAM,MAAAG,aAAA,OAAA,UACAT,EAAAM,MAAAG,aAAA,QAAA,eACAT,EAAAM,MAAAG,aAAA,WAAA,KAGAP,SAAAS,KAAAC,YAEAZ,EAAAC,KAAAY,YAAAX,SAAAS,KAAAC,YAIAV,SAAAS,KAAAE,YAAAb,EAAAC,MACAD,EAAAI,QAAAS,YAAAb,EAAAK,WACAL,EAAAK,UAAAQ,YAAAb,EAAAJ,SACAI,EAAAK,UAAAQ,YAAAb,EAAAM,OACAJ,SAAAS,KAAAE,YAAAb,EAAAI,SAKAU,WAAA,WAEAZ,SAAAS,KAAAJ,UAAAC,IAAA,iBAEAM,WAAA,WAEAd,EAAAJ,QAAAmB,QAGAb,SAAAc,cAAAlB,IAEA,MAEA,GAMA,SAAAmB,WAAAC,EAAAC,GAEA,IAAAC,EAAA,IAAArB,MAAA,eAGAG,SAAAS,KAAAJ,UAAAc,OAAA,iBAIAP,WAAA,WAEA,IAAAH,EAAAT,SAAAS,KAAAW,cAAA,qBAAAZ,UAEAR,SAAAS,KAAAD,UAAAC,GAEA,KAGAT,SAAAc,cAAAI,GAiBA,SAAAG,MAAAC,GAGA,IAAAC,EAAA,IAAA1B,MAAA,aAGAG,SAAAc,cAAAS,GAEA,IAAA5B,EAAA2B,EAAA3B,KAGAF,UAFA6B,EAAA5B,QAEAC,GAvBAK,SAAAwB,iBAAA,QAAA,SAAAR,GAEAA,EAAAS,OAAAC,QAAA,iDAEAV,EAAAW,iBAEAZ,WAAAC,MAEA","file":"modal.min.js","sourcesContent":["function weaslOpen( content, name ) {\n\n  var weaslOpened = new Event('weaslOpened');\n\n  // Create the modal structure\n  var modal = {\n    wrap: document.createElement( 'div' ),\n    overlay: document.createElement( 'div' ),\n    container: document.createElement( 'div' ),\n    content: document.createElement( 'div' ),\n    close: document.createElement( 'button' ),\n  }\n\n  //Add classes and attributes\n  modal.wrap.classList.add('weasl__site-wrap');\n\n  modal.overlay.classList.add('weasl')\n  modal.overlay.classList.add('weasl-' + name)\n\n  modal.container.classList.add('weasl__container');\n  modal.container.setAttribute('role', 'dialog');\n\n  modal.content.classList.add('weasl__content');\n  modal.content.classList.add('weasl__content');\n\n  modal.content.innerHTML = content;\n\n  modal.close.classList.add('weasl__close');\n  modal.close.setAttribute('type', 'button');\n  modal.close.setAttribute('title', 'Close modal');\n  modal.close.setAttribute('tabindex', '0');\n  \n  // Move the body's children into this wrapper\n  while (document.body.firstChild)\n  {\n    modal.wrap.appendChild(document.body.firstChild);\n  }\n\n  // Add modal structure to dom\n  document.body.appendChild(modal.wrap);\n  modal.overlay.appendChild(modal.container);\n  modal.container.appendChild(modal.content);\n  modal.container.appendChild(modal.close);\n  document.body.appendChild(modal.overlay);\n\n\n  // Activate Modal\n\n  setTimeout(function(){\n\n    document.body.classList.add('weasl--active');\n\n    setTimeout(function(){\n      //Set focus\n      modal.content.focus();\n      \n      // Dispatch the open event.\n      document.dispatchEvent(weaslOpened);\n    \n    }, 250 ); \n\n  }, 0 ); \n\n}\n\n// Close modal\n\nfunction weaslClose( event, expiration) {\n\n  var weaslClosed = new Event('weaslClosed');\n\n  // Remove active states from body.\n  document.body.classList.remove('weasl--active');\n  \n  // Remove Content.\n\n  setTimeout(function(){\n\n    var body = document.body.querySelector('.weasl__site-wrap').innerHTML;\n \n    document.body.innerHTML = body;\n\n  }, 250 ); \n\n  // Dispatch the close event.\n  document.dispatchEvent(weaslClosed);\n\n};\n\n\ndocument.addEventListener('click', function (event) {\n  \n  if (!event.target.matches('.weasl__close, .weasl__close-button, .weasl')) return;\n\n  event.preventDefault();\n  \n  weaslClose( event );\n  \n}, false);\n\n\n// Main weasl function\nfunction weasl( options ) {\n  \n  // Declare the open event.\n  var weaslInit = new Event('weaslInit');\n\n  // Dispatch the open event.\n  document.dispatchEvent(weaslInit);\n\n  var name = options.name,\n      content = options.content;\n      \n  weaslOpen( content, name );\n\n}"]}